<div class="post">
  <div class="head">
    <img class="thumbnail" src="/image/a_tale_of_two_ports.jpg" />
    <div class="headline">
      <p class="timestamp">10th of May, 2024 | Vignesh Reddy</p>
      <h1 class="content">A Tale of Two Ports.</h1>
      <sub>It doesn't always have to be complicated.</sub>
    </div>
  </div>
  <hr/>
  <div class="post-content">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Its 3PM. Pushing hard on 2 hours of sleep, I can barely keep my groggy eyes open as I struggle to read Docker Logs. 
    Last night's binge watch doesn't feel like a good decision anymore. My task was to run Elasticsearch in Docker over HTTPS. 
    It was only a few weeks ago when the boys decided that we need to make our system more fault tolerant. Stuff like new instances of the application 
    spawning as soon as one goes down, a Hydra-like system if you would, a mythological beast capable of growing back two 
    heads when you cut one off. One of the guys generated the SSL certs and mailed them to me, I was ready to begin. Since we already had 
    everything up and running on bare metal, this didn't seem like a big deal. In fact, it seemed so trivial to me that I estimated 
    only half a day to finish it. Keep in mind - I have never used Docker before.
    <br/>
    <div class="in-article-image-container">
      <img src="/image/starting_esdocker.jpg" />
    </div>
    <br/>
    I was a able to make good progress at the start of the day. I got Docker installed and pulled Elasticsearch from Docker Hub. 
    There was a little hiccup as Elasticsearch didn't start successfully on the first try, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html#_set_vm_max_map_count_to_at_least_262144">our chunky boy needed some extra room to play with</a>. 
    Elasticsearch was running after this, but was not responding to my http requests. I double-checked my hosts file configuration, no issues.
    I'm reading all the Elasticsearch+Docker blogs that I can get my hands on, none of their solutions work for me. This "easy" task has now taken more than half 
    of my day. Tired and disappointed, I took a break from it and followed up with some other stuff.
    <br/>
    <div class="in-article-image-container">
      <img src="/image/sisyphus.jpg" />
    </div>
    <br/>
    This was also the time when I'm supposed to be getting a newer and faster machine to work with so I went down to the IT guys to ask for my new stuff. 
    Its been weeks since I day when I was supposed to get the goods, almost a month overdue. They tell me that the box they received had no laptop in it. 
    Not even surprised, this day just keeps getting worse. My climb upstairs feels like Sisyphus pushing his boulder up the steep hill in Tartarus. I just 
    couldn't go back to my desk with everything going on, so I went to one of my friends to get a change of environment. I wanted someone to bounce ideas off 
    of for potential solutions and the guy was talking on the phone. So basically I sat there talking to the wall as he was talking to someone else on the 
    phone. I said "maybe I should delete the container and create it again" and he said "hmm". I thanked him and walked away as he said "yeah anytime". Truly 
    one of the most productive conversations in all of human history.
    <br/>
    <div class="in-article-image-container">
      <img src="/image/man_vs_docker.jpg" />
    </div>
    <br/>
    When I tried out the solution I got the same results. Disbelief was all I felt. In an act of desperation, I deleted the docker image for Elasticsearch 
    and pulled a new one out of the remote repo's ass to try it again. Same results. Am I alone in this universe as a prisoner of this Docker container?
    Then I read the docs real carefully like a good boy does and there it was, I was missing a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html#docker-prod-prerequisites">crucial step</a>. That step was routing the 
    container's port to the host machine's port while making the container. This sucked flaming radioactive balls. After this SHIT I went back to the SHIT 
    that I was REALLY supposed to do i.e. configuring the SSL SHIT. Once the job was done and everything was working normally, I documented all that I 
    learned as if my life depended on it.
    <h3>Outcomes:</h3>
    <ol>
      <li>Regained my confidence as a man and faith in God.</li>
      <li>Got Elasticsearch running on Docker over HTTPS, successfully.</li>
    </ol>
  </div>
</div>
